<?xml version='1.0' encoding='utf-8' ?>

<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "Ardour_Notes.ent">
%BOOK_ENTITIES;
]>

<chapter id="chap-Documentation-Ardour_Book-TODO">
  <title>TODO</title>
  <para>
    This is an attempt to organise a <literal>TODO</literal> list for things
    related to Ardour.
  </para>

  <para>
    There is also the
    <ulink url="http://ardour.org/post3.0.html">list</ulink> on the Ardour
    website.
  </para>

  <section id="sect-Documentation-Ardour_Book-TODO_Chapter-Community">
    <title>Community</title>
    <para>
      These are things related to the Ardour Community and serve as a
      reminder of things I should be doing to interact with it.
    </para>

    <itemizedlist>
      <listitem>
        <para>
          Trawl Bug Tracker
        </para>
      </listitem>

      <listitem>
        <para>
          Read Forum
        </para>
      </listitem>

      <listitem>
        <para>
          IRC
        </para>
      </listitem>

      <listitem>
        <para>
          join gtk+ irc channels
        </para>
      </listitem>

      <listitem>
        <para>
          contact inkscape windows devs/packagers
        </para>
      </listitem>

      <listitem>
        <para>
          contact hexchat devs re mvsc packages
        </para>
      </listitem>
    </itemizedlist>
  </section>

  <section id="sect-Documentation-Ardour_Book-TODO_Chapter-Code_Review">
    <title>Code Review</title>
    <para>
      These are things to keep in mind while performing code review.
    </para>

    <itemizedlist>
      <listitem>
        <para>
          Documentation
        </para>
      </listitem>

      <listitem>
        <para>
          Testing, Tests that could be written, Testability of a class or
          function.
        </para>
      </listitem>

      <listitem>
        <para>
          Function length
        </para>
      </listitem>

      <listitem>
        <para>
          Identifier naming(Function/parameters/etc)
        </para>
      </listitem>

      <listitem>
        <para>
          File length
        </para>
      </listitem>

      <listitem>
        <para>
          Refactoring
        </para>
      </listitem>

      <listitem>
        <para>
          Code Style
        </para>
      </listitem>
    </itemizedlist>

    <para>
      Start a code review of the Ardour source starting with the libraries
      at the lowest level of the stack and working back up to the GUI. A
      rough order of libraries would be:
    </para>
    <orderedlist>
      <listitem>
        <para>
          libpbd
        </para>
      </listitem>
      <listitem>
        <para>
          evoral
        </para>
      </listitem>
      <listitem>
        <para>
          libmidi++
        </para>
      </listitem>
      <listitem>
        <para>
          libardour
        </para>
      </listitem>
      <listitem>
        <para>
          libcontrol_protocol
        </para>
      </listitem>
      <listitem>
        <para>
          gtk_ardour
        </para>
      </listitem>
    </orderedlist>
  </section>

  <section id="sect-Documentation-Ardour_Book-TODO_Chapter-Refactoring">
    <title>Refactoring</title>
    <para>
      These are some possible refactorings I've noticed. This also includes
      things like keeping the functionality the same while changing library
      dependencies etc
    </para>

    <itemizedlist>
      <listitem>
        <para>
          establish rough target for file size in lines, header includes etc
        </para>
      </listitem>

      <listitem>
        <para>
          move session directory names in libs/ardour/directory_names into
          SessionDirectory class
        </para>
      </listitem>

      <listitem>
        <para>
          AudioBackend destructor has to be implemented?
        </para>
      </listitem>

      <listitem>
        <para>
          rename ARDOUR::ProcessThread to ARDOUR::ProcessContext
        </para>
      </listitem>

      <listitem>
        <para>
          Investigate whether it is desirable to replace AbstractUI with
          something non-templated. How hard is it to remove all per thread
          event buffers/thread registration. Are there any hueristics that
          can be applied to simplify things
        </para>
      </listitem>

      <listitem>
        <para>
          correct all header include ifdefs to be C and C++ standards
          compliant
        </para>
      </listitem>

      <listitem>
        <para>
          Move SystemExec from gtk_ardour into PBD and test. although why
          not glibmm
        </para>
      </listitem>

      <listitem>
        <para>
          Rename ARDOUR::init_post_engine and write docs about why it needs
          to be called after audio engine is valid etc.
        </para>
      </listitem>

      <listitem>
        <para>
          rename libardour/globals.cc, most of the functions in it are
          declared in ardour/ardour.h
        </para>
      </listitem>

      <listitem>
        <para>
          MidiPatchManager::set_session is called when loading session which
          seems to take a while, is it possible to call this after Session
          is loaded during idle.
        </para>
      </listitem>

      <listitem>
        <para>
          Move PBD::canonical_path etc from pathexpand into file_utils.h/cc
        </para>
      </listitem>

      <listitem>
        <para>
          Move ARDOUR::touch_file into PBD::? only used by sfdb which we
          don't use
        </para>
      </listitem>

      <listitem>
        <para>
          Use Serd? instead of lrdf in AudioLibrary?
        </para>
      </listitem>

      <listitem>
        <para>
          Should debug bits be visible outside a library
        </para>
      </listitem>

      <listitem>
        <para>
          Look at using boost::any instead of XMLNode for
          properties/state/etc, reimplement statesystem branch from old repo
        </para>
      </listitem>
    </itemizedlist>
  </section>

  <section id="sect-Documentation-Ardour_Book-TODO_Chapter-GUI">
    <title>GUI</title>
    <para>
      These items are related to the GUI
    </para>

    <itemizedlist>
      <listitem>
        <para>
          Gtk+3 ?
        </para>
      </listitem>

      <listitem>
        <para>
          Consolidate locations and range markers. Why both?
        </para>
      </listitem>

      <listitem>
        <para>
          Disable remove loop and punch range in locations dialog
        </para>
      </listitem>

      <listitem>
        <para>
          rename ArdourWindow to SessionWindow or something as these windows
          depend on session
        </para>
      </listitem>

      <listitem>
        <para>
          Should the first page of new/open page in startup dialog allow
          direct double click access to existing sessions.
        </para>
      </listitem>

      <listitem>
        <para>
          Shift click on automation point should reset it to 0dB
        </para>
      </listitem>

      <listitem>
        <para>
          move dialog functions into classes or just move functions into new
          file first.
        </para>
      </listitem>
    </itemizedlist>
  </section>

  <section id="sect-Documentation-Ardour_Book-TODO_Chapter-TEST">
    <title>Test</title>
    <para>
      These items are related to tests or testing
    </para>

    <itemizedlist>
      <listitem>
        <para>
          Windows German/French test image
        </para>
      </listitem>

      <listitem>
        <para>
          path tests
        </para>
      </listitem>

      <listitem>
        <para>
          Try to add utf-8 and utf-16/UCS strings to libardour test utils
        </para>
      </listitem>

      <listitem>
        <para>
          AudioEngine test
        </para>
      </listitem>

      <listitem>
        <para>
          Session test that programmaticaly creates a session and writes it
          to a directory that contains the arch/platform it was built on and
          the build identifier
        </para>
      </listitem>

      <listitem>
        <para>
          automatic latency testing. phoronix test integration
        </para>
      </listitem>

      <listitem>
        <para>
          test memory consumption of XMLNode
        </para>
      </listitem>
    </itemizedlist>
  </section>

  <section id="sect-Documentation-Ardour_Book-TODO_Chapter-Dependencies">
    <title>Dependencies</title>
    <para>
      Items relating to Ardour dependencies
    </para>

    <itemizedlist>
      <listitem>
        <para>
          update mingw-cppunit package to at least be a version epoch
          whatever greater than fedora mingw package
        </para>
      </listitem>

      <listitem>
        <para>
          Update mingw packages to define native_pkg_name
        </para>
      </listitem>

      <listitem>
        <para>
          build midi++/pbd/ardour as one dll?
        </para>
      </listitem>

      <listitem>
        <para>
          remove ALSA reference in libardour wscript
        </para>
      </listitem>

      <listitem>
        <para>
          Fix Jack2 to quit properly if given -T flag, something about
          counting internal clients deciding whether or not to exit(or at
          least Paul said something like that)
        </para>
      </listitem>

      <listitem>
        <para>
          Aubio as of version 0.4.1 has issues building with mingw with jack
          enabled.
        </para>
      </listitem>

      <listitem>
        <para>
          Aubio version 0.4.1 needs wine to be able to run unit tests and
          build fails if not installed and able to execute tests. write
          patch to add option to optionally disable unit tests or just email
          author.
        </para>
      </listitem>

      <listitem>
        <para>
          Investigate building Aubio with fftw support rather than inbuilt
          oura
        </para>
      </listitem>
    </itemizedlist>
  </section>

  <section id="sect-Documentation-Ardour_Book-TODO_Chapter-Build_System">
    <title>Build System</title>
    <para>
      Items relating to build system and configuration
    </para>

    <itemizedlist>
      <listitem>
        <para>
          automatic code formatting
        </para>
      </listitem>

      <listitem>
        <para>
          Continuous integration via jenkins/hudson etc?
        </para>
      </listitem>

      <listitem>
        <para>
          Support building using MinGW on windows via cygwin?
        </para>
      </listitem>

      <listitem>
        <para>
          virt images for Fedora, Ubuntu/Debian, Windows xp, vista, 7 and 8?
        </para>
      </listitem>

      <listitem>
        <para>
          build farm using virt images?
        </para>
      </listitem>

      <listitem>
        <para>
          build branch on all arches when it is updated
        </para>
      </listitem>

      <listitem>
        <para>
          avoid subst ardev_common.sh.in every build
        </para>
      </listitem>

      <listitem>
        <para>
          is VERSION used for anything at the top of gtk2_ardour/wscript
          build section?
        </para>
      </listitem>

      <listitem>
        <para>
          Add script/s to ardour-build-scripts to test all build
          configurations
        </para>
      </listitem>
    </itemizedlist>
  </section>

  <section id="sect-Documentation-Ardour_Book-TODO_Chapter-Windows_Dependencies">
    <title>Windows Dependencies</title>
    <para>
      Items relating to Windows build/release Ardour dependencies
    </para>

    <itemizedlist>
      <listitem>
        <para>
          portaudio build mess, write waf build ?
        </para>
      </listitem>

      <listitem>
        <para>
          giomm interface keyword submit bug with patches upstream
        </para>
      </listitem>

      <listitem>
        <para>
          Package LV2 deps serd, sord, sratom, lilv
        </para>
      </listitem>

      <listitem>
        <para>
          Package LV2 reasonable synth
        </para>
      </listitem>

      <listitem>
        <para>
          Package LV2 unreasonable synth
        </para>
      </listitem>

      <listitem>
        <para>
          Package LV2 midifilters
        </para>
      </listitem>

      <listitem>
        <para>
          Package LV2 meters
        </para>
      </listitem>

      <listitem>
        <para>
          Package LV2 mda
        </para>
      </listitem>
    </itemizedlist>
  </section>

  <section id="sect-Documentation-Ardour_Book-TODO_Chapter-LibPBD_Review">
    <title>libpbd review</title>
    <para>
      Items relating to libpbd Review
    </para>

    <itemizedlist>
      <listitem>
        <para>
          Replace use of PBD::split and PBD::replace_all with boost
          equivalents and remove.
        </para>
      </listitem>

      <listitem>
        <para>
          move clock/timing code from PBD::file_manager to
          PBD::get_microseconds and test
        </para>
      </listitem>

      <listitem>
        <para>
          move SndfileManager out of PBD into libardour
        </para>
      </listitem>

      <listitem>
        <para>
          Write docs for PBD::EPA class and why it is necessary
        </para>
      </listitem>

      <listitem>
        <para>
          put pbd/thread_utils in PBD namespace
        </para>
      </listitem>

      <listitem>
        <para>
          PBD::ControllableDescriptor should be in ARDOUR::
        </para>
      </listitem>

      <listitem>
        <para>
          PBD::Controllable should be in ARDOUR:: ?
        </para>
      </listitem>

      <listitem>
        <para>
          rename hardware_concurrency in pbd/cpus.h and put it in PBD
          namespace
        </para>
      </listitem>

      <listitem>
        <para>
          Can PBD::Destructable and PBD::?? be merged into PBD::Object
        </para>
      </listitem>

      <listitem>
        <para>
          Can EnumWriter be replaced with TypeFactory from libmojo?
        </para>
      </listitem>

      <listitem>
        <para>
          Rename PBD::EnvironmentalProtectionAgency
        </para>
      </listitem>

      <listitem>
        <para>
          correct docs for PBD::path_is_within
        </para>
      </listitem>

      <listitem>
        <para>
          Put pbd/command.h and pbd/memento.h inside PBD namespace
        </para>
      </listitem>

      <listitem>
        <para>
          Put pbd/mountpoint inside PBD and is it even necessary anymore?
        </para>
      </listitem>

      <listitem>
        <para>
          Put ControllableDescriptor into libardour
        </para>
      </listitem>

      <listitem>
        <para>
          make pbd/path_expand.h/cc portable and test
        </para>
      </listitem>

      <listitem>
        <para>
          Use glib regex in PBD::path_expand instead of regex.h
        </para>
      </listitem>

      <listitem>
        <para>
          call canonical_path in PBD::path_expand instead of realpath
        </para>
      </listitem>

      <listitem>
        <para>
          Change PBD::Pathscanner to return strings instead of string
          pointers
        </para>
      </listitem>

      <listitem>
        <para>
          Change PBD::PathScanner to use glib regex
        </para>
      </listitem>

      <listitem>
        <para>
          Docs for PBD::init/cleanup
        </para>
      </listitem>

      <listitem>
        <para>
          Move pbd/pool.h into PBD namespace
        </para>
      </listitem>

      <listitem>
        <para>
          Rename CrossThreadPool MultiThreadPool?
        </para>
      </listitem>

      <listitem>
        <para>
          Tests and Docs for every function/method/class?
        </para>
      </listitem>
    </itemizedlist>
  </section>

  <section id="sect-Documentation-Ardour_Book-TODO_Chapter-Windows_Devel">
    <title>Windows Devel</title>
    <para>
      Items relating to Windows development
    </para>

    <itemizedlist>
      <listitem>
        <para>
          Get John to move pbd/fallback_folders.h to msvc folder
        </para>
      </listitem>

      <listitem>
        <para>
          Get John to justify/remove msvc folder
        </para>
      </listitem>

      <listitem>
        <para>
          Investigate defining __USE_MINGW_ANSI_STDIO or _POSIX for mingw
          build
        </para>
      </listitem>

      <listitem>
        <para>
          build with --windows-vst
        </para>
      </listitem>

      <listitem>
        <para>
          Write test audio backend
        </para>
      </listitem>

      <listitem>
        <para>
          Subst Ardour version into scripts for executable names
        </para>
      </listitem>

      <listitem>
        <para>
          Investigate native font backend(not fontconfig) via Gtk+
        </para>
      </listitem>

      <listitem>
        <para>
          doc section on developing for windows and testing/debugging
        </para>
      </listitem>

      <listitem>
        <para>
          Consolidate Semaphore classes
        </para>
      </listitem>

      <listitem>
        <para>
          Use waf to substitute version/program name etc in nsi installer
          script
        </para>
      </listitem>
    </itemizedlist>
  </section>

  <section id="sect-Documentation-Ardour_Book-TODO_Chapter-Docs">
    <title>Documentation</title>
    <para>
      Todo items relating to Documentation
    </para>

    <itemizedlist>
      <listitem>
        <para>
          Write feature matrix comparing similar "products"
        </para>
      </listitem>
    </itemizedlist>
  </section>
</chapter>
